 <template>
    <header class="petHeader fixed inset-x-0 top-0 z-50">
      <nav class="navbar lg:max-w-7xl px-7 lg:mx-auto fixed flex items-center justify-between py-4" aria-label="Global">
        <div class="flex lg:flex-1">
          <a href="/" class="hidden md:flex">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev/svgjs" width="180" height="55" viewBox="0 0 1000 208"><g transform="matrix(1,0,0,1,-9.06300042357401,8.320324069098632)"><svg viewBox="0 0 399 83" data-background-color="#ffffff" preserveAspectRatio="xMidYMid meet" height="208" width="1000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="tight-bounds" transform="matrix(1,0,0,1,3.6161371690060378,0.4575603379911968)"><svg viewBox="0 0 395.52 82.13440264458767" height="82.13440264458767" width="395.52"><g><svg viewBox="0 0 615.4825463077957 127.81222511923687" height="82.13440264458767" width="395.52"><g><rect width="11.46889389399911" height="127.81222511923687" x="178.47036996877273" y="0" fill="#3c2c32" opacity="1" stroke-width="0" stroke="transparent" fill-opacity="1" class="rect-o-0" data-fill-palette-color="primary" rx="1%" id="o-0" data-palette-color="#3c2c32"></rect></g><g transform="matrix(1,0,0,1,219.9625463077957,0.3179408585055583)"><svg viewBox="0 0 395.52 127.17634340222575" height="127.17634340222575" width="395.52"><g id="textblocktransform"><svg viewBox="0 0 395.52 127.17634340222575" height="127.17634340222575" width="395.52" id="textblock"><g><svg viewBox="0 0 395.52 127.17634340222575" height="127.17634340222575" width="395.52"><g transform="matrix(1,0,0,1,0,0)"><svg width="395.52" viewBox="2.0999999046325684 -40 125.79000091552734 40.45000076293945" height="127.17634340222575" data-palette-color="#3c2c32"><path d="M22.95-37.55L22.95-8Q22.95-3.95 20.25-1.95L20.25-1.95Q18.95-1 17.57-0.48 16.2 0.05 14.9 0.05L14.9 0.05 10.1 0.05Q8.8 0.05 7.43-0.48 6.05-1 4.75-1.95L4.75-1.95Q2.1-3.9 2.1-8L2.1-8 2.1-11.3Q2.1-13.65 5-13.65L5-13.65Q8-13.65 8-11.3L8-11.3 8-8.4Q8-7.1 8.75-6.05 9.5-5 11.35-5L11.35-5 13.65-5Q15.5-5 16.25-6.05 17-7.1 17-8.4L17-8.4 17-37.55Q17-39.95 19.95-39.95L19.95-39.95Q22.95-39.95 22.95-37.55L22.95-37.55ZM55.15-1.2L44.15-34.8 33.2-1.2 33.2-1.25Q32.9-0.5 32.37-0.03 31.85 0.45 31.1 0.45L31.1 0.45Q30.7 0.45 30.32 0.38 29.95 0.3 29.55 0.2L29.55 0.2 29.6 0.2Q26.75-0.7 27.5-3L27.5-3 38.9-37.65Q39.15-38.45 39.77-39 40.4-39.55 41.25-39.65L41.25-39.65Q42.1-39.8 42.9-39.88 43.7-39.95 44.15-39.95L44.15-39.95Q44.6-39.95 45.4-39.88 46.2-39.8 47.05-39.7L47.05-39.7Q47.75-39.6 48.42-38.95 49.1-38.3 49.45-37.65L49.45-37.65Q52.25-29.05 55.12-20.33 58-11.6 60.8-3L60.8-3Q61.5-0.7 58.7 0.2L58.7 0.2Q58.3 0.3 57.97 0.38 57.65 0.45 57.25 0.45L57.25 0.45Q56.55 0.45 55.97-0.03 55.4-0.5 55.15-1.25L55.15-1.25 55.15-1.2ZM47.9-12L47.9-12Q47.9-10.4 46.77-9.28 45.65-8.15 44.05-8.15L44.05-8.15Q42.45-8.15 41.35-9.28 40.25-10.4 40.25-12L40.25-12Q40.25-13.6 41.35-14.73 42.45-15.85 44.05-15.85L44.05-15.85Q45.65-15.85 46.77-14.73 47.9-13.6 47.9-12ZM92.25-11.3L92.25-8Q92.25-3.95 89.55-1.95L89.55-1.95Q88.25-1 86.87-0.48 85.5 0.05 84.2 0.05L84.2 0.05 73.3 0.05Q72 0.05 70.62-0.48 69.25-1 67.95-1.95L67.95-1.95Q66.64-2.95 65.95-4.42 65.25-5.9 65.25-8L65.25-8 65.25-31.75Q65.25-33.75 65.95-35.27 66.64-36.8 67.95-37.75L67.95-37.75 67.89-37.75Q69.2-38.6 70.59-39.15 72-39.7 73.3-39.7L73.3-39.7 84.2-39.7Q85.5-39.7 86.9-39.15 88.3-38.6 89.59-37.75L89.59-37.75 89.55-37.75Q90.84-36.8 91.55-35.27 92.25-33.75 92.25-31.75L92.25-31.75 92.25-28.3Q92.25-25.9 89.25-25.9L89.25-25.9Q86.3-25.9 86.3-28.3L86.3-28.3 86.3-31.3Q86.3-32.55 85.55-33.6 84.8-34.65 82.95-34.65L82.95-34.65 74.55-34.65Q72.7-34.65 71.95-33.6 71.2-32.55 71.2-31.3L71.2-31.3 71.2-8.4Q71.2-7.1 71.95-6.05 72.7-5 74.55-5L74.55-5 82.95-5Q84.8-5 85.55-6.05 86.3-7.1 86.3-8.4L86.3-8.4 86.3-11.3Q86.3-13.65 89.25-13.65L89.25-13.65Q92.25-13.65 92.25-11.3L92.25-11.3ZM105.39-21.2L120.64-39.1Q121.39-40 122.34-40L122.34-40Q123.39-40 124.49-39.05L124.49-39.05Q125.04-38.5 125.42-37.95 125.79-37.4 125.79-36.85L125.79-36.85Q125.79-35.95 125.14-35.3L125.14-35.3 118.44-27.5 105.39-12.15 105.39-2.1Q105.39 0.3 102.39 0.3L102.39 0.3Q99.44 0.3 99.44-2.1L99.44-2.1 99.44-37.55Q99.44-39.95 102.39-39.95L102.39-39.95Q105.39-39.95 105.39-37.55L105.39-37.55 105.39-21.2ZM123.04-1.5L113.54-15.35Q113.04-16.05 113.04-17.05L113.04-17.05Q113.04-18.55 114.29-19.45L114.29-19.45 114.24-19.45Q115.24-20.15 116.24-20.15L116.24-20.15Q117.19-20.15 117.84-19.05L117.84-19.05 127.49-4.95 127.44-5Q127.89-4.3 127.89-3.5L127.89-3.5Q127.89-2.2 126.59-1.2L126.59-1.2 126.64-1.2Q126.09-0.85 125.59-0.65 125.09-0.45 124.69-0.45L124.69-0.45Q124.29-0.45 123.87-0.75 123.44-1.05 123.04-1.5L123.04-1.5Z" opacity="1" transform="matrix(1,0,0,1,0,0)" fill="#3c2c32" class="undefined-text-0" data-fill-palette-color="primary" id="text-0"></path></svg></g></svg></g></svg></g></svg></g><g transform="matrix(1,0,0,1,0,0.3179408585055583)"><svg viewBox="0 0 148.44708752374888 127.17634340222575" height="127.17634340222575" width="148.44708752374888"><g><svg xmlns="http://www.w3.org/2000/svg" viewBox="3.971080780029297 12 56.0289192199707 48.00062561035156" x="0" y="0" height="127.17634340222575" width="148.44708752374888" class="icon-icon-0" data-fill-palette-color="accent" id="icon-0"><g data-name="Layer 2" fill="#ec9740" data-fill-palette-color="accent"><path d="M14.43 48A3.57 3.57 0 0 1 18 51.57v0.21A8.22 8.22 0 0 0 26.22 60H37.36a0.63 0.63 0 0 0 0.63-0.63h0a1.75 1.75 0 0 0-1.33-1.7l-4.4-1.1a1 1 0 0 1-0.32-1.87l2.17-1.45A4.21 4.21 0 0 0 36 49.75h0a4.21 4.21 0 0 0-1.23-3l-0.45-0.45a1.07 1.07 0 0 1-0.31-0.76v0a1.07 1.07 0 0 1 1.85-0.74l0.71 0.75a4.49 4.49 0 0 1 1.23 3.09v2a4.49 4.49 0 0 1-2 3.73 0.46 0.46 0 0 0 0.17 0.84l2.09 0.41a6.45 6.45 0 0 1 3.33 1.77A8.9 8.9 0 0 0 47.68 60h11A1.28 1.28 0 0 0 60 58.72a1.45 1.45 0 0 0-0.9-1.34l-2.85-1.16A6.81 6.81 0 0 1 52.66 47l0.09-0.18A33.25 33.25 0 0 0 56 32.47 38.77 38.77 0 0 0 54.58 22.1l-0.07-0.27A2.5 2.5 0 0 0 52.1 20H50.35a5.67 5.67 0 0 1-4-1.66 1.37 1.37 0 1 1 2-1.9 5.68 5.68 0 0 0 4.16 1.81h2.11A5.42 5.42 0 0 0 60 12.83h0a0.83 0.83 0 0 0-0.83-0.83H48.11a9.92 9.92 0 0 0-7 2.9l-2.43 2.43A2.28 2.28 0 0 0 38 18.94a5.22 5.22 0 0 1-2.13 4.21l-2.43 1.79a1.58 1.58 0 0 0-0.21 2.36l1.86 2a3 3 0 0 0 2.23 0.94l5.83-0.09a1.26 1.26 0 0 1 0.91 2.15 21 21 0 0 1-4.24 3.27l-3.76 2.2a28.2 28.2 0 0 1-9.26 3.42l-2.7 0.48a6.86 6.86 0 0 0-3.64 1.9h0a1.64 1.64 0 0 1-1.16 0.48H14.65a6.59 6.59 0 0 1-6.6-5.57C7.36 33.21 13 29 18.35 32.31a5.75 5.75 0 0 1 2.52 5.19A2 2 0 0 0 23 39.56a2.09 2.09 0 0 0 1.85-2.15A10.44 10.44 0 1 0 14.43 48Z" fill="#ec9740" data-fill-palette-color="accent"></path></g></svg></g></svg></g></svg></g><defs></defs></svg><rect width="395.52" height="82.13440264458767" fill="none" stroke="none" visibility="hidden"></rect></g></svg></g></svg>
          </a>
          <a href="/" class="flex md:hidden w-12 h-w-12">
            <img src="../../assets/images/home/logo.png" alt="">
          </a>
        </div>
        <div class="flex lg:hidden">
          <button type="button" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700" @click="mobileMenuOpen = true">
            <span class="sr-only">Open main menu</span>
            <Bars3Icon class="h-6 w-6" aria-hidden="true" />
          </button>
        </div>
        <div class="hidden lg:flex lg:gap-x-12">
          <a v-for="item in navigation" :key="item.name" :href="item.href" class="md:text-md text-stone-950">{{ item.name }}</a>
        </div>
        <div class="hidden lg:flex lg:flex-1 lg:justify-end">
          <div v-if="isLoggedIn">
            <button @click="handleSignOut"> Logout </button>
          </div>
          <a href="/login" class="text-sm font-semibold leading-6 text-gray-900">Log in <span aria-hidden="true">&rarr;</span></a>
        </div>
      </nav>
      <Dialog as="div" class="lg:hidden" @close="mobileMenuOpen = false" :open="mobileMenuOpen">
        <div class="fixed inset-0 z-50" />
        <DialogPanel class="fixed inset-y-0 right-0 z-50 w-full overflow-y-auto menuMobile bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10">
          <div class="flex items-center justify-between">
            <a href="/" class="-m-1.5 p-1.5">
              <span class="sr-only">Your Company</span>
              <img class="h-10 w-auto" src="../../assets/images/home/logo.png" alt="" />
            </a>
            <button type="button" class="-m-2.5 rounded-md p-2.5 text-gray-700" @click="mobileMenuOpen = false">
              <span class="sr-only">Close menu</span>
              <XMarkIcon class="h-6 w-6" aria-hidden="true" />
            </button>
          </div>
          <div class="mt-6 flow-root">
            <div class="-my-6 divide-y divide-gray-500/10">
              <div class="space-y-2 py-6">
                <a v-for="item in navigation" :key="item.name" :href="item.href" class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50">{{ item.name }}</a>
              </div>
              <div class="py-6">
                <div v-if="isLoggedIn">
                  <button @click="handleSignOut"> Logout </button>
                </div>
                <a href="/login" class="-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 text-stone-900 hover:bg-gray-50">Log in</a>
              </div>
            </div>
          </div>
        </DialogPanel>
      </Dialog>
    </header>
  </template>
  
  <script>
import { ref } from 'vue';
import { Dialog, DialogPanel } from '@headlessui/vue';
import { Bars3Icon, XMarkIcon } from '@heroicons/vue/24/outline';
import { getAuth, onAuthStateChanged, signOut } from 'firebase/auth';
import firebaseConfig from '@/firebaseConfig';
import { useRouter } from 'vue-router';

const auth = getAuth(firebaseConfig);

export default {
  name: 'NewNavBar',
  components: {
    Dialog,
    DialogPanel,
    Bars3Icon,
    XMarkIcon
  },
  setup() {
    const mobileMenuOpen = ref(false);
    const navigation = [
      { name: 'Shop', href: '#shop' },
      { name: 'Rescue', href: '#rescue' },
      { name: 'Donation', href: '#donation' },
      { name: 'About Us', href: '#about' },
      { name: 'Contact Us', href: '#contact' },
    ];
    const isLoggedIn = ref(false);
    const router = useRouter();

    const handleSignOut = () => {
      signOut(auth)
        .then(() => {
          router.push('/');
        })
        .catch((error) => {
          console.log(error);
        });
    };

    onAuthStateChanged(auth, (user) => {
      isLoggedIn.value = !!user;
    });

    return {
      mobileMenuOpen,
      navigation,
      isLoggedIn,
      handleSignOut
    };
  }
};
</script>